# üõ†Ô∏è LiteLLM Scripts

–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è LiteLLM.

> **‚úÖ –°–¢–ê–¢–£–°: –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç!**
> - ‚úÖ SSH: yan@65.21.202.252 (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
> - ‚úÖ Telegram: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
> - ‚úÖ Cron: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –≤ 3:00
> - üìÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ: 28 –æ–∫—Ç—è–±—Ä—è 2025

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

| –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|----------|---------------|
| **backup.sh** | –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π | `./backup.sh` |
| **restore.sh** | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–æ–≤ | `./restore.sh` |
| **sync-remote.sh** | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º | `./sync-remote.sh` |
| **telegram-notify.sh** | Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `./telegram-notify.sh test` |
| **docker-safe.sh** | –ó–∞—â–∏—Ç–∞ Docker –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö | `./docker-safe.sh down` |
| **setup-cron.sh** | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤ | `./setup-cron.sh` |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –±—ç–∫–∞–ø–∞

```bash
./backup.sh
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (88,901 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ Grafana –¥–∞—à–±–æ—Ä–¥—ã (4 —à—Ç)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
- üìÅ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤: `../backups/daily/YYYY-MM-DD_HHMMSS/`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather –≤ Telegram
# 2. –ü–æ–ª—É—á–∏—Ç–µ Chat ID —É @userinfobot
# 3. –î–æ–±–∞–≤—å—Ç–µ –≤ .env:
nano ../.env

# –î–æ–±–∞–≤—å—Ç–µ:
TELEGRAM_BOT_TOKEN="YOUR_TOKEN"
TELEGRAM_CHAT_ID="YOUR_CHAT_ID"

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
./telegram-notify.sh test
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á
ssh-copy-id root@65.21.202.252

# 2. –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
./sync-remote.sh

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# ‚úÖ –ë—ç–∫–∞–ø—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ /var/backups/litellm
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cron
./setup-cron.sh

# –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
# 1) Daily at 3:00 AM (recommended)
# 2) Every 6 hours
# 3) Every 12 hours
# 4) Custom

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:
./setup-cron.sh --status
```

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å Docker

```bash
# ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ docker-safe.sh –≤–º–µ—Å—Ç–æ docker compose
./docker-safe.sh restart       # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./docker-safe.sh down          # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è volumes)
./docker-safe.sh up -d         # –ó–∞–ø—É—Å–∫
./docker-safe.sh logs -f       # –õ–æ–≥–∏

# ‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ - –ø–æ—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
./docker-safe.sh down -v       # –£–¥–∞–ª–µ–Ω–∏–µ volumes (–∑–∞—â–∏—â–µ–Ω–æ)
```

## üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
./restore.sh

# –ü—Ä–æ—Ü–µ—Å—Å:
# 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
# 2. –í—ã–±–∏—Ä–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–π
# 3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
# 4. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
# 5. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
```

### –ü—Ä—è–º–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
./restore.sh ../backups/latest

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—ç–∫–∞–ø
./restore.sh ../backups/daily/2025-10-28_002820

# –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (–∏–∑ —Å–∞–º–æ–≥–æ –±—ç–∫–∞–ø–∞)
cd ../backups/daily/2025-10-28_002820
./RESTORE.sh
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–æ–≤

```
backups/
‚îú‚îÄ‚îÄ daily/          # 7 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–Ω–µ–π
‚îú‚îÄ‚îÄ weekly/         # 4 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–µ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ monthly/        # 12 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–µ—Å—è—Ü–µ–≤
‚îî‚îÄ‚îÄ latest/         # –°–∏–º–ª–∏–Ω–∫ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π
```

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

### External Volumes

Docker volumes PostgreSQL –∏ Grafana –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–∞–∫ **external**, –ø–æ—ç—Ç–æ–º—É:
- ‚úÖ –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ `docker compose down -v`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –¢—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `docker volume rm`

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
docker volume ls --filter "name=litellm_external"
```

### Docker Safe Wrapper

–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- `docker compose down -v` ‚Üí –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è + –∞–≤—Ç–æ–±—ç–∫–∞–ø
- `docker compose rm -f` ‚Üí –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `docker volume prune` ‚Üí –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: [../BACKUP_GUIDE.md](../BACKUP_GUIDE.md)

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∞–ª–∏–∞—Å—ã

–î–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc` –∏–ª–∏ `~/.zshrc`:

```bash
# –ù–∞–≤–∏–≥–∞—Ü–∏—è
alias cdlit='cd /home/yan/litellm'
alias cdscr='cd /home/yan/litellm/scripts'

# –ë—ç–∫–∞–ø—ã
alias backup='cd /home/yan/litellm && ./scripts/backup.sh'
alias restore='cd /home/yan/litellm && ./scripts/restore.sh'
alias sync-backup='cd /home/yan/litellm && ./scripts/sync-remote.sh'

# Docker (–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ)
alias dcup='cd /home/yan/litellm && ./scripts/docker-safe.sh up -d'
alias dcdown='cd /home/yan/litellm && ./scripts/docker-safe.sh down'
alias dcrestart='cd /home/yan/litellm && ./scripts/docker-safe.sh restart'
alias dclogs='cd /home/yan/litellm && ./scripts/docker-safe.sh logs -f'

# –õ–æ–≥–∏
alias backup-logs='tail -f /home/yan/litellm/backup.log'
alias sync-logs='tail -f /home/yan/litellm/sync.log'
```

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: `source ~/.bashrc`

## ‚ùì FAQ

### –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–º–µ—Ä –±—ç–∫–∞–ø–æ–≤?
```bash
du -sh ../backups/{daily,weekly,monthly}
```

### –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã –≤—Ä—É—á–Ω—É—é?
```bash
# –£–¥–∞–ª–∏—Ç—å –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find ../backups/daily -type d -mtime +30 -exec rm -rf {} \;
```

### Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
./telegram-notify.sh test

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
grep TELEGRAM ../.env
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH
ssh root@65.21.202.252 "echo 'OK'"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
./sync-remote.sh --help
```

### –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?
```bash
cd ../backups/daily/2025-10-28_002820
PGPASSWORD=dbpassword9090 psql -h localhost -p 5433 -U llmproxy litellm < postgresql_litellm.sql
```

## üÜò –ü–æ–º–æ—â—å

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [../BACKUP_GUIDE.md](../BACKUP_GUIDE.md)
- **Docker –∫–æ–º–∞–Ω–¥—ã**: [../DOCKER_COMMANDS.md](../DOCKER_COMMANDS.md)
- **Git workflow**: [../GIT_WORKFLOW.md](../GIT_WORKFLOW.md)

---

**‚ú® –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥ –Ω–∞–¥–µ–∂–Ω–æ–π –∑–∞—â–∏—Ç–æ–π!**
