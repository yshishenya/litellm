# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º—ã –±—ç–∫–∞–ø–æ–≤ –¥–ª—è OpenWebUI

> **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è LLM-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –±—ç–∫–∞–ø–æ–≤ –¥–ª—è OpenWebUI –ø–æ –æ–±—Ä–∞–∑—Ü—É —Å–∏—Å—Ç–µ–º—ã LiteLLM.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
3. [–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö Docker volumes](#—à–∞–≥-1-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–≤–Ω–µ—à–Ω–∏—Ö-docker-volumes)
4. [–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –±—ç–∫–∞–ø–∞](#—à–∞–≥-2-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–∫—Ä–∏–ø—Ç–æ–≤-–±—ç–∫–∞–ø–∞)
5. [–®–∞–≥ 3: –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è](#—à–∞–≥-3-—Å–∫—Ä–∏–ø—Ç-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)
6. [–®–∞–≥ 4: –£–¥–∞–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è](#—à–∞–≥-4-—É–¥–∞–ª–µ–Ω–Ω–∞—è-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
7. [–®–∞–≥ 5: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è](#—à–∞–≥-5-telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
8. [–®–∞–≥ 6: Docker Safety Wrapper](#—à–∞–≥-6-docker-safety-wrapper)
9. [–®–∞–≥ 7: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron](#—à–∞–≥-7-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è-—á–µ—Ä–µ–∑-cron)
10. [–®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—à–∞–≥-8-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
11. [–®–∞–≥ 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#—à–∞–≥-9-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ß—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ —Å:
- ‚úÖ **–ó–∞—â–∏—Ç–æ–π –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è** (–≤–Ω–µ—à–Ω–∏–µ Docker volumes)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –±—ç–∫–∞–ø–∞–º–∏** (–Ω–æ—á—å—é –≤ 3:00)
- ‚úÖ **–†–æ—Ç–∞—Ü–∏–µ–π –±—ç–∫–∞–ø–æ–≤** (7 –¥–Ω–µ–≤–Ω—ã—Ö, 4 –Ω–µ–¥–µ–ª—å–Ω—ã—Ö, 12 –º–µ—Å—è—á–Ω—ã—Ö)
- ‚úÖ **–£–¥–∞–ª–µ–Ω–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º** (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏** (Telegram –±–æ—Ç)
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é** (–∑–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ Docker)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã 3-2-1

- **3** –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–±–æ—á–∞—è + –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø + —É–¥–∞–ª–µ–Ω–Ω—ã–π –±—ç–∫–∞–ø)
- **2** —Ç–∏–ø–∞ –Ω–æ—Å–∏—Ç–µ–ª–µ–π (SSD —Å–µ—Ä–≤–µ—Ä–∞ + —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
- **1** –∫–æ–ø–∏—è offsite (–Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
OpenWebUI Server
‚îú‚îÄ‚îÄ Docker Volumes (external) ‚Üê –ó–∞—â–∏—Ç–∞ –æ—Ç 'docker compose down -v'
‚îÇ   ‚îú‚îÄ‚îÄ openwebui_data_external
‚îÇ   ‚îî‚îÄ‚îÄ openwebui_postgres_data_external (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL)
‚îÇ
‚îú‚îÄ‚îÄ /backups/ ‚Üê –õ–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ daily/   (—Ö—Ä–∞–Ω—è—Ç—Å—è 7 –¥–Ω–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ weekly/  (—Ö—Ä–∞–Ω—è—Ç—Å—è 4 –Ω–µ–¥–µ–ª–∏)
‚îÇ   ‚îî‚îÄ‚îÄ monthly/ (—Ö—Ä–∞–Ω—è—Ç—Å—è 12 –º–µ—Å—è—Ü–µ–≤)
‚îÇ
‚îú‚îÄ‚îÄ /scripts/
‚îÇ   ‚îú‚îÄ‚îÄ backup.sh          ‚Üê –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ restore.sh         ‚Üê –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ sync-remote.sh     ‚Üê –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ telegram-notify.sh ‚Üê –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ docker-safe.sh     ‚Üê –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ
‚îî‚îÄ‚îÄ Cron Job (3:00 AM)
    ‚îî‚îÄ‚îÄ backup.sh ‚Üí sync-remote.sh ‚Üí telegram-notify.sh

Remote Server (65.21.202.252)
‚îî‚îÄ‚îÄ /backups/openwebui/ ‚Üê –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏
    ‚îú‚îÄ‚îÄ daily/
    ‚îú‚îÄ‚îÄ weekly/
    ‚îî‚îÄ‚îÄ monthly/
```

---

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö Docker volumes

### 1.1 –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ volumes

**–ó–∞–¥–∞—á–∞**: –ù–∞–π–¥–∏—Ç–µ –≤ `docker-compose.yml` –≤—Å–µ volumes, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å.

–î–ª—è OpenWebUI –æ–±—ã—á–Ω–æ —ç—Ç–æ:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –∏–ª–∏ PostgreSQL)
- Uploaded files / –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ú–æ–¥–µ–ª–∏ (–µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è)

**–ü—Ä–∏–º–µ—Ä –∏–∑ OpenWebUI**:
```yaml
volumes:
  openwebui-data:
  postgres-data:  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL
```

### 1.2 –°–æ–∑–¥–∞–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ volumes

```bash
# –ù–∞–π–¥–∏—Ç–µ –∏–º–µ–Ω–∞ —Ç–µ–∫—É—â–∏—Ö volumes
docker volume ls | grep openwebui

# –°–æ–∑–¥–∞–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ volumes
docker volume create openwebui_data_external
docker volume create openwebui_postgres_data_external  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL
```

### 1.3 –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: –ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é!

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
cd /path/to/openwebui
docker compose down

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ volume –≤ –Ω–æ–≤—ã–π
docker run --rm \
  -v openwebui_openwebui-data:/source:ro \
  -v openwebui_data_external:/target \
  alpine sh -c "cd /source && cp -a . /target && echo 'OpenWebUI data copied'"

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL:
docker run --rm \
  -v openwebui_postgres-data:/source:ro \
  -v openwebui_postgres_data_external:/target \
  alpine sh -c "cd /source && cp -a . /target && echo 'PostgreSQL data copied'"
```

### 1.4 –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml

**–ó–∞–º–µ–Ω–∏—Ç–µ**:
```yaml
volumes:
  openwebui-data:
  postgres-data:
```

**–ù–∞**:
```yaml
volumes:
  openwebui-data:
    name: openwebui_data_external
    external: true
  postgres-data:
    name: openwebui_postgres_data_external
    external: true
```

### 1.5 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose ps
docker compose logs --tail 50

# –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å!
# –û—Ç–∫—Ä–æ–π—Ç–µ OpenWebUI –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –Ω–∞ –º–µ—Å—Ç–µ

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞—â–∏—Ç—É –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è
docker compose down -v  # volumes –ù–ï –¥–æ–ª–∂–Ω—ã —É–¥–∞–ª–∏—Ç—å—Å—è
docker volume ls | grep openwebui_data_external  # –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è
```

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –±—ç–∫–∞–ø–∞

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤

```bash
cd /path/to/openwebui
mkdir -p scripts
chmod 755 scripts
```

### 2.2 –°–æ–∑–¥–∞–π—Ç–µ backup.sh

**–§–∞–π–ª**: `scripts/backup.sh`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ** (–∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ OpenWebUI):

```bash
#!/bin/bash

#==============================================================================
# OpenWebUI Backup Script
# –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
#==============================================================================

set -euo pipefail

#------------------------------------------------------------------------------
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
#------------------------------------------------------------------------------

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
BACKUP_ROOT="${PROJECT_DIR}/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
DATE_DAILY=$(date +%Y%m%d)
DATE_WEEKLY=$(date +%Y_week%W)
DATE_MONTHLY=$(date +%Y%m)

# Retention periods
DAILY_RETENTION=7
WEEKLY_RETENTION=4
MONTHLY_RETENTION=12

# Telegram notifications (–∏–∑ .env)
if [ -f "${PROJECT_DIR}/.env" ]; then
    source "${PROJECT_DIR}/.env" 2>/dev/null || true
fi

#------------------------------------------------------------------------------
# –§—É–Ω–∫—Ü–∏–∏
#------------------------------------------------------------------------------

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $*"
}

error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $*" >&2
}

send_telegram() {
    local message="$1"
    if [ -n "${TELEGRAM_BOT_TOKEN:-}" ] && [ -n "${TELEGRAM_CHAT_ID:-}" ]; then
        "${SCRIPT_DIR}/telegram-notify.sh" info "$message" || true
    fi
}

cleanup_old_backups() {
    local backup_type=$1
    local retention=$2
    local backup_dir="${BACKUP_ROOT}/${backup_type}"

    if [ ! -d "$backup_dir" ]; then
        return
    fi

    log "Cleaning up old ${backup_type} backups (keeping ${retention})..."

    # –ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
    find "$backup_dir" -mindepth 1 -maxdepth 1 -type d | \
        sort -r | \
        tail -n +$((retention + 1)) | \
        while read -r old_backup; do
            log "Removing old backup: $(basename "$old_backup")"
            rm -rf "$old_backup"
        done
}

#------------------------------------------------------------------------------
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –±—ç–∫–∞–ø–∞
#------------------------------------------------------------------------------

DAY_OF_WEEK=$(date +%u)  # 1=Monday, 7=Sunday
DAY_OF_MONTH=$(date +%d)

if [ "$DAY_OF_MONTH" = "01" ]; then
    BACKUP_TYPE="monthly"
    BACKUP_DATE="$DATE_MONTHLY"
    log "Creating MONTHLY backup"
elif [ "$DAY_OF_WEEK" = "7" ]; then
    BACKUP_TYPE="weekly"
    BACKUP_DATE="$DATE_WEEKLY"
    log "Creating WEEKLY backup"
else
    BACKUP_TYPE="daily"
    BACKUP_DATE="$DATE_DAILY"
    log "Creating DAILY backup"
fi

BACKUP_DIR="${BACKUP_ROOT}/${BACKUP_TYPE}/${BACKUP_DATE}_${TIMESTAMP}"

#------------------------------------------------------------------------------
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
#------------------------------------------------------------------------------

mkdir -p "$BACKUP_DIR"
log "Backup directory: $BACKUP_DIR"

#------------------------------------------------------------------------------
# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
#------------------------------------------------------------------------------

log "Backing up database..."

# –î–ª—è SQLite (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
if docker compose exec -T openwebui test -f /app/backend/data/webui.db 2>/dev/null; then
    docker compose exec -T openwebui sqlite3 /app/backend/data/webui.db .dump > "${BACKUP_DIR}/sqlite_webui.sql"
    log "SQLite database backed up"
fi

# –î–ª—è PostgreSQL (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
if docker compose exec -T db pg_isready -U openwebui 2>/dev/null; then
    PGPASSWORD="${DB_PASSWORD:-openwebui}" docker compose exec -T db \
        pg_dump -U "${DB_USER:-openwebui}" "${DB_NAME:-openwebui}" \
        > "${BACKUP_DIR}/postgresql_openwebui.sql"
    log "PostgreSQL database backed up"
fi

#------------------------------------------------------------------------------
# –ë—ç–∫–∞–ø Docker volumes
#------------------------------------------------------------------------------

log "Backing up Docker volumes..."

# OpenWebUI data volume
docker run --rm \
    -v openwebui_data_external:/source:ro \
    -v "${BACKUP_DIR}:/backup" \
    alpine tar czf /backup/openwebui_data.tar.gz -C /source .

log "OpenWebUI data backed up"

# PostgreSQL data (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
if docker volume ls | grep -q openwebui_postgres_data_external; then
    docker run --rm \
        -v openwebui_postgres_data_external:/source:ro \
        -v "${BACKUP_DIR}:/backup" \
        alpine tar czf /backup/postgres_data.tar.gz -C /source .
    log "PostgreSQL data backed up"
fi

#------------------------------------------------------------------------------
# –ë—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
#------------------------------------------------------------------------------

log "Backing up configuration files..."

# docker-compose.yml
if [ -f "${PROJECT_DIR}/docker-compose.yml" ]; then
    cp "${PROJECT_DIR}/docker-compose.yml" "${BACKUP_DIR}/"
fi

# .env (–µ—Å–ª–∏ –µ—Å—Ç—å)
if [ -f "${PROJECT_DIR}/.env" ]; then
    cp "${PROJECT_DIR}/.env" "${BACKUP_DIR}/"
fi

# –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
# –î–æ–±–∞–≤—å—Ç–µ –∑–¥–µ—Å—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è OpenWebUI —Ñ–∞–π–ª—ã

#------------------------------------------------------------------------------
# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
#------------------------------------------------------------------------------

cat > "${BACKUP_DIR}/BACKUP_INVENTORY.txt" << EOF
OpenWebUI Backup Inventory
==========================
Created: $(date '+%Y-%m-%d %H:%M:%S')
Type: ${BACKUP_TYPE}
Hostname: $(hostname)
Server IP: $(hostname -I | awk '{print $1}')

Files in this backup:
EOF

ls -lh "$BACKUP_DIR" >> "${BACKUP_DIR}/BACKUP_INVENTORY.txt"

#------------------------------------------------------------------------------
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
#------------------------------------------------------------------------------

cat > "${BACKUP_DIR}/RESTORE.sh" << 'RESTORE_SCRIPT'
#!/bin/bash
set -euo pipefail

echo "=== OpenWebUI Backup Restoration ==="
echo "Backup from: BACKUP_DATE"
echo ""
echo "WARNING: This will replace your current OpenWebUI data!"
echo "Make sure you have stopped the services: docker compose down"
echo ""
read -p "Continue? (yes/no): " confirm

if [ "$confirm" != "yes" ]; then
    echo "Restoration cancelled"
    exit 1
fi

BACKUP_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$(dirname "$(dirname "$BACKUP_DIR")")")"

echo "Restoring from: $BACKUP_DIR"
echo "Project directory: $PROJECT_DIR"

# Restore database
if [ -f "${BACKUP_DIR}/sqlite_webui.sql" ]; then
    echo "Restoring SQLite database..."
    # Add SQLite restore commands
fi

if [ -f "${BACKUP_DIR}/postgresql_openwebui.sql" ]; then
    echo "Restoring PostgreSQL database..."
    # Add PostgreSQL restore commands
fi

# Restore volumes
if [ -f "${BACKUP_DIR}/openwebui_data.tar.gz" ]; then
    echo "Restoring OpenWebUI data..."
    docker run --rm \
        -v openwebui_data_external:/target \
        -v "${BACKUP_DIR}:/backup:ro" \
        alpine sh -c "rm -rf /target/* && tar xzf /backup/openwebui_data.tar.gz -C /target"
fi

echo ""
echo "‚úÖ Restoration complete!"
echo "Start services: cd $PROJECT_DIR && docker compose up -d"
RESTORE_SCRIPT

chmod +x "${BACKUP_DIR}/RESTORE.sh"

#------------------------------------------------------------------------------
# –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
#------------------------------------------------------------------------------

BACKUP_SIZE=$(du -sh "$BACKUP_DIR" | cut -f1)
FILE_COUNT=$(find "$BACKUP_DIR" -type f | wc -l)

log "Backup completed: ${BACKUP_SIZE}, ${FILE_COUNT} files"

#------------------------------------------------------------------------------
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
#------------------------------------------------------------------------------

ln -sfn "$BACKUP_DIR" "${BACKUP_ROOT}/latest"

#------------------------------------------------------------------------------
# –†–æ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
#------------------------------------------------------------------------------

cleanup_old_backups "daily" $DAILY_RETENTION
cleanup_old_backups "weekly" $WEEKLY_RETENTION
cleanup_old_backups "monthly" $MONTHLY_RETENTION

#------------------------------------------------------------------------------
# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
#------------------------------------------------------------------------------

send_telegram "‚úÖ OpenWebUI Backup Complete
Type: ${BACKUP_TYPE}
Size: ${BACKUP_SIZE}
Files: ${FILE_COUNT}
Location: ${BACKUP_DIR}"

log "All done! ‚úÖ"
```

### 2.3 –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x scripts/backup.sh
```

---

## –®–∞–≥ 3: –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 3.1 –°–æ–∑–¥–∞–π—Ç–µ restore.sh

**–§–∞–π–ª**: `scripts/restore.sh`

```bash
#!/bin/bash

#==============================================================================
# OpenWebUI Restore Script
# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
#==============================================================================

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
BACKUP_ROOT="${PROJECT_DIR}/backups"

#------------------------------------------------------------------------------
# –§—É–Ω–∫—Ü–∏–∏
#------------------------------------------------------------------------------

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $*"
}

error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $*" >&2
}

#------------------------------------------------------------------------------
# –í—ã–±–æ—Ä –±—ç–∫–∞–ø–∞
#------------------------------------------------------------------------------

echo "=== OpenWebUI Backup Restoration ==="
echo ""
echo "Available backups:"
echo ""

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
find "$BACKUP_ROOT" -mindepth 2 -maxdepth 2 -type d | sort -r | nl

echo ""
read -p "Enter backup number (or 'latest' for most recent): " choice

if [ "$choice" = "latest" ]; then
    BACKUP_DIR="${BACKUP_ROOT}/latest"
    if [ ! -d "$BACKUP_DIR" ]; then
        error "No latest backup found"
        exit 1
    fi
else
    BACKUP_DIR=$(find "$BACKUP_ROOT" -mindepth 2 -maxdepth 2 -type d | sort -r | sed -n "${choice}p")
    if [ ! -d "$BACKUP_DIR" ]; then
        error "Invalid backup selection"
        exit 1
    fi
fi

echo ""
echo "Selected backup: $BACKUP_DIR"
echo ""

#------------------------------------------------------------------------------
# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
#------------------------------------------------------------------------------

echo "‚ö†Ô∏è  WARNING: This will REPLACE your current OpenWebUI data!"
echo ""
echo "Backup contains:"
ls -lh "$BACKUP_DIR"
echo ""
read -p "Are you sure? Type 'yes' to continue: " confirm

if [ "$confirm" != "yes" ]; then
    log "Restoration cancelled"
    exit 0
fi

#------------------------------------------------------------------------------
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
#------------------------------------------------------------------------------

log "Checking if services are stopped..."

if docker compose ps | grep -q "Up"; then
    error "Services are still running! Please stop them first:"
    echo "  cd $PROJECT_DIR && docker compose down"
    exit 1
fi

#------------------------------------------------------------------------------
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
#------------------------------------------------------------------------------

log "Starting restoration..."

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ volumes
if [ -f "${BACKUP_DIR}/openwebui_data.tar.gz" ]; then
    log "Restoring OpenWebUI data volume..."
    docker run --rm \
        -v openwebui_data_external:/target \
        -v "${BACKUP_DIR}:/backup:ro" \
        alpine sh -c "rm -rf /target/* /target/..?* /target/.[!.]* 2>/dev/null || true; tar xzf /backup/openwebui_data.tar.gz -C /target"
    log "‚úÖ OpenWebUI data restored"
fi

if [ -f "${BACKUP_DIR}/postgres_data.tar.gz" ]; then
    log "Restoring PostgreSQL data volume..."
    docker run --rm \
        -v openwebui_postgres_data_external:/target \
        -v "${BACKUP_DIR}:/backup:ro" \
        alpine sh -c "rm -rf /target/* /target/..?* /target/.[!.]* 2>/dev/null || true; tar xzf /backup/postgres_data.tar.gz -C /target"
    log "‚úÖ PostgreSQL data restored"
fi

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î –∑–¥–µ—Å—å

#------------------------------------------------------------------------------
# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
#------------------------------------------------------------------------------

log "‚úÖ Restoration complete!"
echo ""
echo "Next steps:"
echo "  1. Start services: cd $PROJECT_DIR && docker compose up -d"
echo "  2. Check logs: docker compose logs -f"
echo "  3. Verify in browser"
echo ""
```

### 3.2 –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x scripts/restore.sh
```

---

## –®–∞–≥ 4: –£–¥–∞–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### 4.1 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏

**–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ** (–≥–¥–µ OpenWebUI):

```bash
# –°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á –µ—Å–ª–∏ –Ω–µ—Ç
ssh-keygen -t ed25519 -f ~/.ssh/openwebui_backup -C "openwebui-backup"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -i ~/.ssh/openwebui_backup yan@65.21.202.252

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/openwebui_backup yan@65.21.202.252 "echo 'SSH —Ä–∞–±–æ—Ç–∞–µ—Ç!'"
```

**–ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ**:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p /home/yan/backups/openwebui/{daily,weekly,monthly}
chmod 700 /home/yan/backups
```

### 4.2 –°–æ–∑–¥–∞–π—Ç–µ sync-remote.sh

**–§–∞–π–ª**: `scripts/sync-remote.sh`

```bash
#!/bin/bash

#==============================================================================
# OpenWebUI Remote Sync Script
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
#==============================================================================

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ .env
if [ -f "${PROJECT_DIR}/.env" ]; then
    source "${PROJECT_DIR}/.env" 2>/dev/null || true
fi

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
REMOTE_HOST="${BACKUP_REMOTE_HOST:-65.21.202.252}"
REMOTE_USER="${BACKUP_REMOTE_USER:-yan}"
REMOTE_PATH="${BACKUP_REMOTE_PATH:-/home/yan/backups/openwebui}"
REMOTE_PORT="${BACKUP_REMOTE_PORT:-22}"
SSH_KEY="${BACKUP_SSH_KEY:-$HOME/.ssh/openwebui_backup}"

LOCAL_BACKUP_DIR="${PROJECT_DIR}/backups"

#------------------------------------------------------------------------------
# –§—É–Ω–∫—Ü–∏–∏
#------------------------------------------------------------------------------

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $*"
}

error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $*" >&2
}

send_telegram() {
    local level="$1"
    local message="$2"
    if [ -n "${TELEGRAM_BOT_TOKEN:-}" ] && [ -n "${TELEGRAM_CHAT_ID:-}" ]; then
        "${SCRIPT_DIR}/telegram-notify.sh" "$level" "$message" || true
    fi
}

#------------------------------------------------------------------------------
# –ü—Ä–æ–≤–µ—Ä–∫–∏
#------------------------------------------------------------------------------

if [ ! -f "$SSH_KEY" ]; then
    error "SSH key not found: $SSH_KEY"
    send_telegram "error" "‚ùå Remote sync failed: SSH key not found"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
if ! ssh -o ConnectTimeout=10 -i "$SSH_KEY" -p "$REMOTE_PORT" \
    "${REMOTE_USER}@${REMOTE_HOST}" "echo 'Connection OK'" >/dev/null 2>&1; then
    error "Cannot connect to remote server"
    send_telegram "error" "‚ùå Remote sync failed: Cannot connect to $REMOTE_HOST"
    exit 1
fi

#------------------------------------------------------------------------------
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
#------------------------------------------------------------------------------

log "Starting remote synchronization to ${REMOTE_USER}@${REMOTE_HOST}"

RSYNC_OPTS=(
    -avz
    --partial
    --progress
    --delete
    --stats
    -e "ssh -i $SSH_KEY -p $REMOTE_PORT"
)

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è daily –±—ç–∫–∞–ø–æ–≤
if [ -d "${LOCAL_BACKUP_DIR}/daily" ]; then
    log "Syncing daily backups..."
    rsync "${RSYNC_OPTS[@]}" \
        "${LOCAL_BACKUP_DIR}/daily/" \
        "${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_PATH}/daily/" \
        2>&1 | tee /tmp/rsync_daily.log
fi

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è weekly –±—ç–∫–∞–ø–æ–≤
if [ -d "${LOCAL_BACKUP_DIR}/weekly" ]; then
    log "Syncing weekly backups..."
    rsync "${RSYNC_OPTS[@]}" \
        "${LOCAL_BACKUP_DIR}/weekly/" \
        "${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_PATH}/weekly/" \
        2>&1 | tee /tmp/rsync_weekly.log
fi

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è monthly –±—ç–∫–∞–ø–æ–≤
if [ -d "${LOCAL_BACKUP_DIR}/monthly" ]; then
    log "Syncing monthly backups..."
    rsync "${RSYNC_OPTS[@]}" \
        "${LOCAL_BACKUP_DIR}/monthly/" \
        "${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_PATH}/monthly/" \
        2>&1 | tee /tmp/rsync_monthly.log
fi

#------------------------------------------------------------------------------
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
#------------------------------------------------------------------------------

# –ü–æ–¥—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
REMOTE_SIZE=$(ssh -i "$SSH_KEY" -p "$REMOTE_PORT" \
    "${REMOTE_USER}@${REMOTE_HOST}" \
    "du -sh ${REMOTE_PATH} 2>/dev/null | cut -f1" || echo "unknown")

log "‚úÖ Remote sync complete!"
log "Remote backup size: $REMOTE_SIZE"

send_telegram "success" "‚úÖ Remote Sync Complete
Server: ${REMOTE_HOST}
Size: ${REMOTE_SIZE}"
```

### 4.3 –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env

```bash
# Remote Backup Server
BACKUP_REMOTE_HOST="65.21.202.252"
BACKUP_REMOTE_USER="yan"
BACKUP_REMOTE_PATH="/home/yan/backups/openwebui"
BACKUP_REMOTE_PORT="22"
BACKUP_SSH_KEY="$HOME/.ssh/openwebui_backup"
```

### 4.4 –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x scripts/sync-remote.sh
```

---

## –®–∞–≥ 5: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 5.1 –°–æ–∑–¥–∞–π—Ç–µ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º (–∏–º—è –±–æ—Ç–∞, username)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 5.2 –ü–æ–ª—É—á–∏—Ç–µ Chat ID

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ START
3. –ü–æ–ª—É—á–∏—Ç–µ chat ID:
```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates" | grep chat
```

### 5.3 –°–æ–∑–¥–∞–π—Ç–µ telegram-notify.sh

**–§–∞–π–ª**: `scripts/telegram-notify.sh`

```bash
#!/bin/bash

#==============================================================================
# Telegram Notification Script
# –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
#==============================================================================

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
if [ -f "${PROJECT_DIR}/.env" ]; then
    source "${PROJECT_DIR}/.env" 2>/dev/null || true
fi

BOT_TOKEN="${TELEGRAM_BOT_TOKEN:-}"
CHAT_ID="${TELEGRAM_CHAT_ID:-}"

#------------------------------------------------------------------------------
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
#------------------------------------------------------------------------------

if [ -z "$BOT_TOKEN" ] || [ -z "$CHAT_ID" ]; then
    echo "Telegram not configured. Set TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID in .env"
    exit 0
fi

#------------------------------------------------------------------------------
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
#------------------------------------------------------------------------------

LEVEL="${1:-info}"
MESSAGE="${2:-Test message}"

# –≠–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
case "$LEVEL" in
    success)
        ICON="‚úÖ"
        ;;
    error)
        ICON="‚ùå"
        ;;
    warning)
        ICON="‚ö†Ô∏è"
        ;;
    info)
        ICON="‚ÑπÔ∏è"
        ;;
    *)
        ICON="üìù"
        ;;
esac

#------------------------------------------------------------------------------
# –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
#------------------------------------------------------------------------------

FULL_MESSAGE="${ICON} **OpenWebUI Backup**

${MESSAGE}

Server: $(hostname)
Time: $(date '+%Y-%m-%d %H:%M:%S')"

#------------------------------------------------------------------------------
# –û—Ç–ø—Ä–∞–≤–∫–∞
#------------------------------------------------------------------------------

curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
    -d chat_id="${CHAT_ID}" \
    -d text="${FULL_MESSAGE}" \
    -d parse_mode="Markdown" \
    > /dev/null

if [ $? -eq 0 ]; then
    echo "‚úÖ Telegram notification sent"
else
    echo "‚ùå Failed to send Telegram notification"
    exit 1
fi
```

### 5.4 –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env

```bash
# Telegram Bot Notifications
TELEGRAM_BOT_TOKEN="your_bot_token_here"
TELEGRAM_CHAT_ID="your_chat_id_here"
```

### 5.5 –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

```bash
chmod +x scripts/telegram-notify.sh

# –¢–µ—Å—Ç
./scripts/telegram-notify.sh success "Test notification!"
```

---

## –®–∞–≥ 6: Docker Safety Wrapper

### 6.1 –°–æ–∑–¥–∞–π—Ç–µ docker-safe.sh

**–§–∞–π–ª**: `scripts/docker-safe.sh`

```bash
#!/bin/bash

#==============================================================================
# Docker Safety Wrapper
# –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è volumes
#==============================================================================

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

COMMAND="$*"

#------------------------------------------------------------------------------
# –û–ø–∞—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
#------------------------------------------------------------------------------

DANGEROUS_PATTERNS=(
    "down -v"
    "down.*-v"
    "compose down -v"
    "volume prune"
    "volume rm"
    "rm -f.*volume"
)

#------------------------------------------------------------------------------
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã
#------------------------------------------------------------------------------

IS_DANGEROUS=false

for pattern in "${DANGEROUS_PATTERNS[@]}"; do
    if echo "$COMMAND" | grep -qE "$pattern"; then
        IS_DANGEROUS=true
        break
    fi
done

if [ "$IS_DANGEROUS" = false ]; then
    # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ - –≤—ã–ø–æ–ª–Ω—è–µ–º —Å—Ä–∞–∑—É
    exec docker $COMMAND
fi

#------------------------------------------------------------------------------
# –û–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ - —Ç—Ä–µ–±—É–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
#------------------------------------------------------------------------------

echo ""
echo "‚ö†Ô∏è  WARNING: DANGEROUS DOCKER COMMAND DETECTED! ‚ö†Ô∏è"
echo ""
echo "Command: docker $COMMAND"
echo ""
echo "This command may DELETE Docker volumes and ALL DATA!"
echo ""
echo "Before proceeding:"
echo "  1. Make sure you have a recent backup"
echo "  2. Understand the consequences"
echo ""

read -p "Type 'I UNDERSTAND THE RISKS' to continue: " confirm

if [ "$confirm" != "I UNDERSTAND THE RISKS" ]; then
    echo "‚ùå Command cancelled"
    exit 1
fi

echo ""
echo "‚ö†Ô∏è  FINAL CONFIRMATION ‚ö†Ô∏è"
echo ""
read -p "Type 'YES DELETE' to execute: " final_confirm

if [ "$final_confirm" != "YES DELETE" ]; then
    echo "‚ùå Command cancelled"
    exit 1
fi

#------------------------------------------------------------------------------
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–ø–∞—Å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
#------------------------------------------------------------------------------

echo ""
echo "Creating emergency backup before executing dangerous command..."
"${SCRIPT_DIR}/backup.sh"

if [ $? -eq 0 ]; then
    echo "‚úÖ Emergency backup created"
else
    echo "‚ùå Backup failed!"
    read -p "Continue anyway? (yes/no): " continue_anyway
    if [ "$continue_anyway" != "yes" ]; then
        echo "‚ùå Command cancelled"
        exit 1
    fi
fi

#------------------------------------------------------------------------------
# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
#------------------------------------------------------------------------------

echo ""
echo "Executing: docker $COMMAND"
exec docker $COMMAND
```

### 6.2 –°–æ–∑–¥–∞–π—Ç–µ alias

–î–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc` –∏–ª–∏ `~/.zshrc`:

```bash
# Docker Safety Wrapper –¥–ª—è OpenWebUI
alias docker-compose='/path/to/openwebui/scripts/docker-safe.sh compose'
```

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ:
```bash
source ~/.bashrc  # –∏–ª–∏ ~/.zshrc
```

### 6.3 –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x scripts/docker-safe.sh
```

---

## –®–∞–≥ 7: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron

### 7.1 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron job

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É (–∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 3:00)
0 3 * * * /path/to/openwebui/scripts/backup.sh >> /path/to/openwebui/backup.log 2>&1 && /path/to/openwebui/scripts/sync-remote.sh >> /path/to/openwebui/sync.log 2>&1
```

**–ó–∞–º–µ–Ω–∏—Ç–µ `/path/to/openwebui` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å!**

### 7.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ cron —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
crontab -l

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ cron daemon –∑–∞–ø—É—â–µ–Ω
systemctl status cron  # –∏–ª–∏ crond
```

---

## –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞

```bash
cd /path/to/openwebui

# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –±—ç–∫–∞–ø
./scripts/backup.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω
ls -lh backups/daily/
ls -lh backups/latest/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
cat backups/latest/BACKUP_INVENTORY.txt
```

### 8.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
./scripts/sync-remote.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
ssh yan@65.21.202.252 "ls -lh /home/yan/backups/openwebui/daily/"
```

### 8.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–í–ê–ñ–ù–û**: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –¢–ï–°–¢–û–í–û–ô —Å–∏—Å—Ç–µ–º–µ!

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
./scripts/restore.sh

# –í—ã–±–µ—Ä–∏—Ç–µ latest backup
# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs -f
```

### 8.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```bash
./scripts/telegram-notify.sh success "–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
./scripts/telegram-notify.sh error "–¢–µ—Å—Ç –æ—à–∏–±–∫–∏"
./scripts/telegram-notify.sh warning "–¢–µ—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è"
./scripts/telegram-notify.sh info "–¢–µ—Å—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
```

### 8.5 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker Safety

```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–ø–∞—Å–Ω—É—é –∫–æ–º–∞–Ω–¥—É
docker-compose down -v

# –î–æ–ª–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
```

---

## –®–∞–≥ 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 9.1 –°–æ–∑–¥–∞–π—Ç–µ BACKUP_GUIDE.md

**–§–∞–π–ª**: `BACKUP_GUIDE.md`

```markdown
# OpenWebUI Backup System Guide

> **‚úÖ –°–¢–ê–¢–£–°: –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!**
> - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 3:00
> - ‚úÖ –£–¥–∞–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ 65.21.202.252
> - ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
> - üìÖ –î–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: [–î–ê–¢–ê]

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤—Ä—É—á–Ω—É—é
\`\`\`bash
cd /path/to/openwebui
./scripts/backup.sh
\`\`\`

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
\`\`\`bash
cd /path/to/openwebui
docker compose down
./scripts/restore.sh
docker compose up -d
\`\`\`

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –±—ç–∫–∞–ø—ã
\`\`\`bash
ssh yan@65.21.202.252 "ls -lh /home/yan/backups/openwebui/daily/"
\`\`\`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

[–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—é–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è"]

## –†–æ—Ç–∞—Ü–∏—è –±—ç–∫–∞–ø–æ–≤

- **Daily**: 7 –¥–Ω–µ–π
- **Weekly**: 4 –Ω–µ–¥–µ–ª–∏
- **Monthly**: 12 –º–µ—Å—è—Ü–µ–≤

## –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤

- **–õ–æ–∫–∞–ª—å–Ω—ã–µ**: `/path/to/openwebui/backups/`
- **–£–¥–∞–ª–µ–Ω–Ω—ã–µ**: `yan@65.21.202.252:/home/yan/backups/openwebui/`
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π**: `/path/to/openwebui/backups/latest` (—Å–∏–º–ª–∏–Ω–∫)

## –ß—Ç–æ –±—ç–∫–∞–ø–∏—Ç—Å—è

- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –∏–ª–∏ PostgreSQL)
- ‚úÖ Uploaded files
- ‚úÖ Docker volumes
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.env, docker-compose.yml)

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

Cron job –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 3:00:
\`\`\`
0 3 * * * /path/to/openwebui/scripts/backup.sh && /path/to/openwebui/scripts/sync-remote.sh
\`\`\`

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
\`\`\`bash
tail -f /path/to/openwebui/backup.log
tail -f /path/to/openwebui/sync.log
\`\`\`

## Troubleshooting

[–î–æ–±–∞–≤—å—Ç–µ —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è]
```

### 9.2 –°–æ–∑–¥–∞–π—Ç–µ README.md –¥–ª—è scripts/

**–§–∞–π–ª**: `scripts/README.md`

```markdown
# OpenWebUI Backup Scripts

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è OpenWebUI.

## –°–∫—Ä–∏–ø—Ç—ã

### backup.sh
–°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
\`\`\`bash
./backup.sh
\`\`\`

### restore.sh
–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
\`\`\`bash
docker compose down
./restore.sh
docker compose up -d
\`\`\`

### sync-remote.sh
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
\`\`\`bash
./sync-remote.sh
\`\`\`

### telegram-notify.sh
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
\`\`\`bash
./telegram-notify.sh [level] "[message]"

# –ü—Ä–∏–º–µ—Ä—ã:
./telegram-notify.sh success "Backup complete"
./telegram-notify.sh error "Backup failed"
./telegram-notify.sh warning "Disk space low"
./telegram-notify.sh info "Starting backup"
\`\`\`

### docker-safe.sh
–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è Docker volumes.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
\`\`\`bash
# –°–æ–∑–¥–∞–π—Ç–µ alias –≤ ~/.bashrc:
alias docker-compose='/path/to/openwebui/scripts/docker-safe.sh compose'
\`\`\`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

\`\`\`bash
# Remote Backup Server
BACKUP_REMOTE_HOST="65.21.202.252"
BACKUP_REMOTE_USER="yan"
BACKUP_REMOTE_PATH="/home/yan/backups/openwebui"

# Telegram Bot
TELEGRAM_BOT_TOKEN="your_token"
TELEGRAM_CHAT_ID="your_chat_id"
\`\`\`
```

---

## –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è LLM

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–º—É —á–µ–∫–ª–∏—Å—Ç—É:

- [ ] **–®–∞–≥ 1**: –°–æ–∑–¥–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ Docker volumes
  - [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
  - [ ] –°–æ–∑–¥–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ volumes
  - [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

- [ ] **–®–∞–≥ 2**: –°–æ–∑–¥–∞—Ç—å backup.sh
  - [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é scripts/
  - [ ] –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ OpenWebUI
  - [ ] –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- [ ] **–®–∞–≥ 3**: –°–æ–∑–¥–∞—Ç—å restore.sh
  - [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
  - [ ] –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ!)

- [ ] **–®–∞–≥ 4**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
  - [ ] –°–æ–∑–¥–∞—Ç—å SSH –∫–ª—é—á–∏
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
  - [ ] –°–æ–∑–¥–∞—Ç—å sync-remote.sh
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- [ ] **–®–∞–≥ 5**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram
  - [ ] –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
  - [ ] –ü–æ–ª—É—á–∏—Ç—å Chat ID
  - [ ] –°–æ–∑–¥–∞—Ç—å telegram-notify.sh
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- [ ] **–®–∞–≥ 6**: –°–æ–∑–¥–∞—Ç—å Docker Safety Wrapper
  - [ ] –°–æ–∑–¥–∞—Ç—å docker-safe.sh
  - [ ] –°–æ–∑–¥–∞—Ç—å alias
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- [ ] **–®–∞–≥ 7**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
  - [ ] –î–æ–±–∞–≤–∏—Ç—å cron job
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- [ ] **–®–∞–≥ 8**: –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
  - [ ] –¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - [ ] –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  - [ ] –¢–µ—Å—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - [ ] –¢–µ—Å—Ç Docker Safety

- [ ] **–®–∞–≥ 9**: –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
  - [ ] BACKUP_GUIDE.md
  - [ ] scripts/README.md
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π README –ø—Ä–æ–µ–∫—Ç–∞

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü—É—Ç–∏**: –ó–∞–º–µ–Ω–∏—Ç–µ `/path/to/openwebui` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
2. **–ò–º–µ–Ω–∞ volumes**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ Docker volumes –¥–ª—è OpenWebUI
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: OpenWebUI –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQLite –∏–ª–∏ PostgreSQL - –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã
4. **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã**: –î–æ–±–∞–≤—å—Ç–µ –≤ –±—ç–∫–∞–ø –ª—é–±—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è OpenWebUI —Ñ–∞–π–ª—ã
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–°–ï–ì–î–ê —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å–Ω–∞—á–∞–ª–∞!

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f backup.log sync.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `ls -la scripts/`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH: `ssh -vvv yan@65.21.202.252`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram: `./scripts/telegram-notify.sh info "test"`

---

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üéâ
