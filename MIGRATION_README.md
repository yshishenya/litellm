# LiteLLM Migration Guide

## ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ LiteLLM Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€

**Ð’ÐµÑ€ÑÐ¸Ñ:** 1.0
**Ð”Ð°Ñ‚Ð°:** $(date '+%Y-%m-%d')
**ÐœÐµÑ‚Ð¾Ð´:** Blue-Green Deployment
**Ð¦ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑÐµÑ€Ð²ÐµÑ€:** 65.21.202.252

---

## ðŸ“‹ ÐžÐ³Ð»Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

1. [ÐžÐ±Ð·Ð¾Ñ€ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸](#Ð¾Ð±Ð·Ð¾Ñ€-Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸)
2. [ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°](#Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°)
3. [Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸](#Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹-Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸)
4. [Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚](#Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹-ÑÑ‚Ð°Ñ€Ñ‚)
5. [Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°](#Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ-Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°)
6. [ÐžÑ‚ÐºÐ°Ñ‚](#Ð¾Ñ‚ÐºÐ°Ñ‚)
7. [FAQ](#faq)
8. [ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°](#Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°)

---

## ÐžÐ±Ð·Ð¾Ñ€ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### Ð§Ñ‚Ð¾ Ð¼Ð¸Ð³Ñ€Ð¸Ñ€ÑƒÐµÐ¼

**Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹ (6 Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²):**
- âœ… LiteLLM Proxy (Ð¿Ð¾Ñ€Ñ‚ 4000)
- âœ… PostgreSQL (Ð¿Ð¾Ñ€Ñ‚ 5433)
- âœ… Redis (Ð¿Ð¾Ñ€Ñ‚ 6381)
- âœ… Prometheus (Ð¿Ð¾Ñ€Ñ‚ 9092)
- âœ… Grafana (Ð¿Ð¾Ñ€Ñ‚ 3098)
- âœ… Metrics Exporter (Ð¿Ð¾Ñ€Ñ‚ 9090)

**Ð”Ð°Ð½Ð½Ñ‹Ðµ:**
- âœ… PostgreSQL Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… (~1.7GB, 94,458+ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹)
- âœ… Grafana Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ñ‹ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
- âœ… Prometheus Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ (90 Ð´Ð½ÐµÐ¹ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸)
- âœ… Redis Ð´Ð°Ð½Ð½Ñ‹Ðµ
- âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ ÑÐµÐºÑ€ÐµÑ‚Ñ‹
- âœ… Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð±ÑÐºÐ°Ð¿Ð¾Ð² Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°

**Ð”Ð¾Ð¼ÐµÐ½Ñ‹:**
- litellm.pro-4.ru
- dash.pro-4.ru

### Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|----------|----------|
| ÐœÐµÑ‚Ð¾Ð´ | Blue-Green Deployment |
| ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ | 5-10 Ð¼Ð¸Ð½ÑƒÑ‚ |
| ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° | 30-45 Ð¼Ð¸Ð½ÑƒÑ‚ |
| ÐžÐ±Ñ‰ÐµÐµ Ð²Ñ€ÐµÐ¼Ñ | ~1 Ñ‡Ð°Ñ |
| Ð Ð¸ÑÐº Ð¿Ð¾Ñ‚ÐµÑ€Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… | ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ |
| Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¾Ñ‚ÐºÐ°Ñ‚Ð° | Ð”Ð° (48 Ñ‡Ð°ÑÐ¾Ð²) |

---

## ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº Ð½Ð¾Ð²Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ

- âœ… Ubuntu Linux
- âœ… Docker 20.10+
- âœ… Docker Compose v2+
- âœ… PostgreSQL client (psql)
- âœ… 20+ GB ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð°
- âœ… SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°
- âœ… ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ð¾Ñ€Ñ‚Ñ‹: 4000, 5433, 6381, 9090, 9092, 3098

### ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH

```bash
# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH ÐºÐ»ÑŽÑ‡ÐµÐ¹ Ð´Ð»Ñ Ð±ÐµÑÐ¿Ð°Ñ€Ð¾Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°
ssh-copy-id yan@65.21.202.252

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
ssh yan@65.21.202.252 "echo OK"
```

---

## Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹

| Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ | Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ |
|--------|-----------|---------------|
| **pre-migration-check.sh** | ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸ Ðº Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ | `./scripts/pre-migration-check.sh` |
| **migrate-to-new.sh** | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ | `./scripts/migrate-to-new.sh` |
| **post-migration-verify.sh** | Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ð¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ | `./scripts/post-migration-verify.sh` |
| **emergency-rollback.sh** | Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚ÐºÐ°Ñ‚ | `./scripts/emergency-rollback.sh` |

### Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹

| Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|----------|----------|
| **MIGRATION_CHECKLIST.md** | Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚ Ð²ÑÐµÑ… ÑˆÐ°Ð³Ð¾Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ |
| **ROLLBACK_PLAN.md** | ÐŸÐ»Ð°Ð½ Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼ |
| **DNS_UPDATE_INSTRUCTIONS.md** | Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑŽ DNS |
| **MIGRATION_README.md** | Ð­Ñ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ |

### Ð¡ÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸)

| Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|--------|-----------|
| **backup.sh** | Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð±ÑÐºÐ°Ð¿Ð¾Ð² |
| **restore.sh** | Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð· Ð±ÑÐºÐ°Ð¿Ð° |
| **sync-remote.sh** | Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ |
| **telegram-notify.sh** | Telegram ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ |

---

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

**Ð”Ð»Ñ Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹:**

```bash
# 1. ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
cd /home/yan/litellm
./scripts/pre-migration-check.sh

# 2. Ð—Ð°Ð¿ÑƒÑÐº Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
./scripts/migrate-to-new.sh

# 3. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
# 4. ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ DNS Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ (ÑÐ¼. DNS_UPDATE_INSTRUCTIONS.md)

# 5. Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
ssh yan@65.21.202.252
cd /home/yan/litellm
./scripts/post-migration-verify.sh
```

**Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:** 30-45 Ð¼Ð¸Ð½ÑƒÑ‚ + 5-10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ DNS

---

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð‘: ÐŸÐ¾ÑˆÐ°Ð³Ð¾Ð²Ð°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ

**Ð”Ð»Ñ Ñ‚ÐµÑ…, ÐºÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ:**

Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚Ñƒ Ð² **[MIGRATION_CHECKLIST.md](./MIGRATION_CHECKLIST.md)**

---

## Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°

### Ð¤Ð°Ð·Ð° 1: ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸

```bash
cd /home/yan/litellm

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
./scripts/pre-migration-check.sh
```

**Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ÑÑ:**
- âœ… Docker Ð¸ Docker Compose Ð½Ð° Ð¾Ð±Ð¾Ð¸Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð°Ñ…
- âœ… Ð—Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
- âœ… PostgreSQL Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- âœ… ÐÐ°Ð»Ð¸Ñ‡Ð¸Ðµ Ð±ÑÐºÐ°Ð¿Ð¾Ð²
- âœ… SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð½Ð¾Ð²Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ
- âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
- âœ… Ð¡Ð²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾ Ð½Ð° Ð´Ð¸ÑÐºÐ°Ñ…

**ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸"

---

### Ð¤Ð°Ð·Ð° 2: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð±ÑÐºÐ°Ð¿Ð°

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±ÑÐºÐ°Ð¿ Ð¿ÐµÑ€ÐµÐ´ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÐµÐ¹
./scripts/backup.sh

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿
ls -lh backups/latest/

# Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€
./scripts/sync-remote.sh
```

**Ð§Ñ‚Ð¾ Ð±ÑÐºÐ°Ð¿Ð¸Ñ‚ÑÑ:**
- PostgreSQL Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð´Ð°Ð¼Ð¿
- Grafana Ð´Ð°Ð½Ð½Ñ‹Ðµ
- Prometheus Ð´Ð°Ð½Ð½Ñ‹Ðµ (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
- Ð’ÑÐµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
- Redis Ð´Ð°Ð½Ð½Ñ‹Ðµ

---

### Ð¤Ð°Ð·Ð° 3: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
./scripts/migrate-to-new.sh
```

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚:**

1. **ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸**
   - Ð—Ð°Ð¿ÑƒÑÐº pre-migration-check.sh
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

2. **Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±ÑÐºÐ°Ð¿**
   - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²ÐµÐ¶ÐµÐ³Ð¾ Ð±ÑÐºÐ°Ð¿Ð°
   - Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€

3. **ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²**
   - ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ (.env, config.yaml, Ð¸ Ñ‚.Ð´.)
   - Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹
   - Grafana provisioning
   - Ð‘ÑÐºÐ°Ð¿Ñ‹

4. **ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð½Ð° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ**
   - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹
   - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Docker volumes
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Docker

5. **Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…**
   - Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ PostgreSQL
   - Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Grafana
   - ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Prometheus Ð´Ð°Ð½Ð½Ñ‹Ñ…

6. **Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²**
   - docker compose up -d
   - ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸

7. **Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ**
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÑÐµÑ… endpoints
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…
   - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ smoke tests

**Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ:** 20-30 Ð¼Ð¸Ð½ÑƒÑ‚

**Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ:** Ð¡Ð»ÐµÐ´Ð¸Ñ‚ÑŒ Ð·Ð° Ð²Ñ‹Ð²Ð¾Ð´Ð¾Ð¼, Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ð°Ñ‚ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÑƒ

---

### Ð¤Ð°Ð·Ð° 4: ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ DNS (ÐŸÐ ÐžÐ¡Ð¢ÐžÐ™)

**Ð’ÐÐ–ÐÐž:** Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð’Ð Ð£Ð§ÐÐ£Ð® Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ!

```bash
# 1. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸
ssh yan@65.21.202.252 "cd /home/yan/litellm && ./scripts/post-migration-verify.sh"

# 2. Ð¡Ð»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ Ð² DNS_UPDATE_INSTRUCTIONS.md
```

**ÐšÑ€Ð°Ñ‚ÐºÐ¾:**
1. Ð’Ð¾Ð¹Ñ‚Ð¸ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ DNS
2. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ A-Ð·Ð°Ð¿Ð¸ÑÐ¸:
   - litellm.pro-4.ru â†’ 65.21.202.252
   - dash.pro-4.ru â†’ 65.21.202.252
3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ TTL = 300 (5 Ð¼Ð¸Ð½ÑƒÑ‚)
4. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ
5. Ð”Ð¾Ð¶Ð´Ð°Ñ‚ÑŒÑÑ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ DNS (5-15 Ð¼Ð¸Ð½ÑƒÑ‚)
6. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð´Ð¾Ð¼ÐµÐ½Ñ‹

**Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸:** [DNS_UPDATE_INSTRUCTIONS.md](./DNS_UPDATE_INSTRUCTIONS.md)

**Ð’Ñ€ÐµÐ¼Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ:** 5-10 Ð¼Ð¸Ð½ÑƒÑ‚ (Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ DNS)

---

### Ð¤Ð°Ð·Ð° 5: Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ

```bash
# ÐÐ° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ DNS
ssh yan@65.21.202.252
cd /home/yan/litellm

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½ÑƒÑŽ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ
./scripts/post-migration-verify.sh
```

**Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ÑÑ:**
- âœ… Ð’ÑÐµ 6 ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ñ‹
- âœ… LiteLLM API Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- âœ… PostgreSQL Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð° Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- âœ… Redis Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- âœ… Prometheus ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸
- âœ… Grafana Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ñ‹
- âœ… Metrics Exporter ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸
- âœ… DNS Ñ€ÐµÐ·Ð¾Ð»Ð²Ð¸Ñ‚ÑÑ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€
- âœ… Ð”Ð¾Ð¼ÐµÐ½Ñ‹ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹
- âœ… ÐÐµÑ‚ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð² Ð»Ð¾Ð³Ð°Ñ…

**ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** "ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ ÐŸÐžÐ›ÐÐžÐ¡Ð¢Ð¬Ð® Ð£Ð¡ÐŸÐ•Ð¨ÐÐ"

---

### Ð¤Ð°Ð·Ð° 6: ÐŸÐ¾ÑÑ‚-Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸

```bash
# ÐÐ° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ

# 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹
./scripts/setup-cron.sh

# 2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ cron Ð·Ð°Ð´Ð°Ñ‡Ð¸
crontab -l

# 3. ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿
./scripts/backup.sh

# 4. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Telegram ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
./scripts/telegram-notify.sh "Ð¢ÐµÑÑ‚ Ð¿Ð¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸"
```

**ÐÐ• Ð£Ð”ÐÐ›Ð¯Ð™Ð¢Ð• ÑÑ‚Ð°Ñ€Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 48 Ñ‡Ð°ÑÐ¾Ð²!**

---

## ÐžÑ‚ÐºÐ°Ñ‚

### ÐšÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶ÐµÐ½ Ð¾Ñ‚ÐºÐ°Ñ‚

**ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸ (Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚ÐºÐ°Ñ‚):**
- âŒ API Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð±Ð¾Ð»ÐµÐµ 15 Ð¼Ð¸Ð½ÑƒÑ‚
- âŒ PostgreSQL Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð° Ð¸Ð»Ð¸ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ð°
- âŒ ÐŸÐ¾Ñ‚ÐµÑ€Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð°
- âŒ ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² Ð»Ð¾Ð³Ð°Ñ…

**ÐÐµÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸ (Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ):**
- âš ï¸ ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ Ð² Ð»Ð¾Ð³Ð°Ñ… (ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚)
- âš ï¸ ÐœÐ¸Ð½Ð¾Ñ€Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ°Ð¼Ð¸
- âš ï¸ ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ (Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ API ÐžÐš)

---

### Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¾Ñ‚ÐºÐ°Ñ‚

**ÐÐ° ÑÑ‚Ð°Ñ€Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ:**

```bash
cd /home/yan/litellm

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¾Ñ‚ÐºÐ°Ñ‚Ð°
./scripts/emergency-rollback.sh

# Ð¡Ð»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
```

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚:**
1. ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
2. Ð—Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ
4. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÑƒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹

**ÐšÐ Ð˜Ð¢Ð˜Ð§ÐÐž:** ÐŸÐ¾ÑÐ»Ðµ Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ DNS Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾!

**Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ð¾Ñ‚ÐºÐ°Ñ‚Ð°:** [ROLLBACK_PLAN.md](./ROLLBACK_PLAN.md)

---

## Ð¢Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ (~1 Ñ‡Ð°Ñ)

```
00:00 - ÐÐ°Ñ‡Ð°Ð»Ð¾: ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ (5-10 Ð¼Ð¸Ð½)
00:10 - Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±ÑÐºÐ°Ð¿ (5-10 Ð¼Ð¸Ð½)
00:20 - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ (20-30 Ð¼Ð¸Ð½)
00:50 - Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ (10-15 Ð¼Ð¸Ð½)

=== ÐÐÐ§ÐÐ›Ðž ÐŸÐ ÐžÐ¡Ð¢ÐžÐ¯ ===
01:05 - ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ DNS (1 Ð¼Ð¸Ð½)
01:06 - ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ DNS (5-10 Ð¼Ð¸Ð½)
01:15 - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð´Ð¾Ð¼ÐµÐ½Ñ‹ (2-3 Ð¼Ð¸Ð½)
=== ÐšÐžÐÐ•Ð¦ ÐŸÐ ÐžÐ¡Ð¢ÐžÐ¯ ===

01:18 - Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ (5 Ð¼Ð¸Ð½)
01:23 - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (5 Ð¼Ð¸Ð½)
01:28 - Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ
```

**ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹:** ~10-15 Ð¼Ð¸Ð½ÑƒÑ‚ (Ñ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð° Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ DNS)

---

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ð¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### ÐŸÐµÑ€Ð²Ñ‹Ðµ 24 Ñ‡Ð°ÑÐ°

**ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ:**

```bash
# Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ
ssh yan@65.21.202.252 "cd /home/yan/litellm && docker compose ps"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° API
curl http://litellm.pro-4.ru:4000/health/liveliness

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Grafana
curl http://dash.pro-4.ru:3098/api/health

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð² Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸
ssh yan@65.21.202.252 "cd /home/yan/litellm && docker compose logs --tail=100 | grep -i error"
```

**ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³:**

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
cat > /tmp/monitor.sh << 'EOF'
#!/bin/bash
while true; do
    echo "=== $(date) ==="
    curl -sf http://litellm.pro-4.ru:4000/health/liveliness && echo "âœ“ API OK" || echo "âœ— API FAIL"
    curl -sf http://dash.pro-4.ru:3098/api/health && echo "âœ“ Grafana OK" || echo "âœ— Grafana FAIL"
    echo ""
    sleep 300  # ÐšÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚
done
EOF

chmod +x /tmp/monitor.sh
/tmp/monitor.sh
```

---

### ÐŸÐ¾ÑÐ»Ðµ 48 Ñ‡Ð°ÑÐ¾Ð²

**Ð•ÑÐ»Ð¸ Ð²ÑÐµ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾:**

```bash
# ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°

# 1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ñ€Ñ…Ð¸Ð² (Ð½Ð° Ð²ÑÑÐºÐ¸Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹)
ssh [ÑÑ‚Ð°Ñ€Ñ‹Ð¹_ÑÐµÑ€Ð²ÐµÑ€] "cd /home/yan/litellm && ./scripts/backup.sh"

# 2. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
ssh [ÑÑ‚Ð°Ñ€Ñ‹Ð¹_ÑÐµÑ€Ð²ÐµÑ€] "cd /home/yan/litellm && docker compose down -v"

# 3. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð°Ñ€Ñ…Ð¸Ð² Ð² Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾
# 4. ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
```

---

## FAQ

### Q: Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð·Ð°Ð¹Ð¼ÐµÑ‚ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ?
**A:** ÐžÐ±Ñ‰ÐµÐµ Ð²Ñ€ÐµÐ¼Ñ ~1 Ñ‡Ð°Ñ, Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ ~5-10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ DNS.

### Q: Ð‘ÑƒÐ´ÑƒÑ‚ Ð»Ð¸ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ½Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ðµ?
**A:** ÐÐµÑ‚, Ð¿Ñ€Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð²ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ. Ð¡Ð¾Ð·Ð´Ð°ÑŽÑ‚ÑÑ Ð±ÑÐºÐ°Ð¿Ñ‹ Ð´Ð¾ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸.

### Q: Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¿Ð¾Ð¹Ð´ÐµÑ‚ Ð½Ðµ Ñ‚Ð°Ðº?
**A:** Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ `./scripts/emergency-rollback.sh` Ð½Ð° ÑÑ‚Ð°Ñ€Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ DNS Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾. Ð¡Ð¼. [ROLLBACK_PLAN.md](./ROLLBACK_PLAN.md)

### Q: ÐšÐ¾Ð³Ð´Ð° Ð¼Ð¾Ð¶Ð½Ð¾ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€?
**A:** ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ Ñ‡ÐµÑ€ÐµÐ· 48 Ñ‡Ð°ÑÐ¾Ð² ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°. Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð½ÐµÐ´ÐµÐ»Ñ.

### Q: ÐÑƒÐ¶Ð½Ð¾ Ð»Ð¸ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹?
**A:** Ð”Ð°, ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð¸Ñ‚Ðµ Ð¾ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾Ð¼ 5-10 Ð¼Ð¸Ð½ÑƒÑ‚Ð½Ð¾Ð¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ DNS.

### Q: Ð§Ñ‚Ð¾ ÐµÑÐ»Ð¸ DNS Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð¾Ð»Ð³Ð¾?
**A:** Ð­Ñ‚Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾. TTL 300 ÑÐµÐºÑƒÐ½Ð´ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð´Ð¾ 5 Ð¼Ð¸Ð½ÑƒÑ‚ + Ð²Ñ€ÐµÐ¼Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ISP (Ð´Ð¾ 30-60 Ð¼Ð¸Ð½ÑƒÑ‚ Ð² Ñ…ÑƒÐ´ÑˆÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ).

### Q: ÐœÐ¾Ð¶Ð½Ð¾ Ð»Ð¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ñ€Ð°Ð·Ð±Ð¸Ñ‚ÑŒ Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð´Ð½ÐµÐ¹?
**A:** Ð”Ð°. Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð·Ð°Ñ€Ð°Ð½ÐµÐµ, Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ DNS Ð² ÑƒÐ´Ð¾Ð±Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ.

### Q: ÐÑƒÐ¶Ð½Ð¾ Ð»Ð¸ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚?
**A:** Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ HTTPS, Ð´Ð°. ÐŸÐ¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ²Ñ‹Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ SSL Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ IP Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹.

### Q: Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ñ API ÐºÐ»ÑŽÑ‡Ð°Ð¼Ð¸?
**A:** ÐžÐ½Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð² `.env` Ð¸ `config.yaml`. ÐŸÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ SSH/SCP. ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ Ñ€Ð¾Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸.

---

## Troubleshooting

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: pre-migration-check.sh Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐŸÑ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ ÐºÐ°ÐºÐ¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸
2. Ð˜ÑÐ¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹
3. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°
4. ÐÐµ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ð¹Ñ‚Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ð¿Ð¾ÐºÐ° Ð²ÑÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ðµ Ð¿Ñ€Ð¾Ð¹Ð´ÑƒÑ‚

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: migrate-to-new.sh Ð·Ð°Ð²Ð¸ÑÐ°ÐµÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ: `ssh yan@65.21.202.252`
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸: `tail -f migration_*.log`
4. Ð•ÑÐ»Ð¸ Ð±ÐµÐ·Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ - Ctrl+C Ð¸ Ð½Ð°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð·Ð°Ð½Ð¾Ð²Ð¾

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: PostgreSQL Ð½Ðµ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐÐ° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ
ssh yan@65.21.202.252
cd /home/yan/litellm

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ PostgreSQL
docker compose logs db

# ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
docker compose up -d db
sleep 10

# ÐÐ°Ð¹Ñ‚Ð¸ Ð±ÑÐºÐ°Ð¿
ls -lh backups/latest/postgresql_litellm.sql

# Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
docker exec -i litellm_db psql -U llmproxy -d postgres < backups/latest/postgresql_litellm.sql
```

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: DNS Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚Ðµ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ DNS ÐºÐµÑˆ
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð½Ñ‹Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²: `nslookup litellm.pro-4.ru 8.8.8.8`
3. ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ TTL Ð²Ñ€ÐµÐ¼Ñ (5-15 Ð¼Ð¸Ð½ÑƒÑ‚)
4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ Ð² Ð¿Ð°Ð½ÐµÐ»Ð¸ DNS

Ð¡Ð¼. [DNS_UPDATE_INSTRUCTIONS.md](./DNS_UPDATE_INSTRUCTIONS.md) Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Grafana Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ñ‹ Ð¿ÑƒÑÑ‚Ñ‹Ðµ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ datasources
curl -u admin:admin123 http://localhost:3098/api/datasources

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Prometheus
curl http://localhost:9092/api/v1/targets

# ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð°Ñ‚ÑŒ 5-10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð´Ð»Ñ ÑÐ±Ð¾Ñ€Ð° Ð¼ÐµÑ‚Ñ€Ð¸Ðº
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°
```

---

## Ð§ÐµÐº-Ð»Ð¸ÑÑ‚ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸

### ÐŸÐµÑ€ÐµÐ´ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÐµÐ¹:
- [ ] SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] pre-migration-check.sh Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½
- [ ] Ð‘ÑÐºÐ°Ð¿Ñ‹ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ
- [ ] ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ñ‹
- [ ] ÐÐ¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð³Ð¾Ñ‚Ð¾Ð²

### ÐŸÐ¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸:
- [ ] Ð’ÑÐµ 6 ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ñ‹
- [ ] post-migration-verify.sh Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½
- [ ] DNS Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½
- [ ] Ð”Ð¾Ð¼ÐµÐ½Ñ‹ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹
- [ ] ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹
- [ ] Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½ Ð½Ð° 48 Ñ‡Ð°ÑÐ¾Ð²

### Ð§ÐµÑ€ÐµÐ· 48 Ñ‡Ð°ÑÐ¾Ð²:
- [ ] Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð°
- [ ] ÐÐµÑ‚ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- [ ] Ð‘ÑÐºÐ°Ð¿Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
- [ ] ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] ÐœÐ¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸Ð½ÑÑ‚ÑŒ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¾Ð± ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°

---

## ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

### Telegram ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
```bash
./scripts/telegram-notify.sh "Ð’Ð°ÑˆÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"
```

### Ð›Ð¾Ð³Ð¸
- ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ: `/home/yan/litellm/migration_*.log`
- ÐžÑ‚ÐºÐ°Ñ‚: `/home/yan/litellm/emergency_rollback_*.log`
- Ð‘ÑÐºÐ°Ð¿Ñ‹: `/home/yan/litellm/backup.log`
- Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ: `/home/yan/litellm/sync.log`

### Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker compose ps

# Ð›Ð¾Ð³Ð¸
docker compose logs -f

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ
curl http://localhost:4000/health/liveliness

# PostgreSQL
PGPASSWORD=dbpassword9090 psql -h localhost -p 5433 -U llmproxy -d litellm

# ÐŸÐ¾Ð»Ð½Ð°Ñ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
./scripts/post-migration-verify.sh

# Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚ÐºÐ°Ñ‚
./scripts/emergency-rollback.sh
```

---

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

```
/home/yan/litellm/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ pre-migration-check.sh       # ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
â”‚   â”œâ”€â”€ migrate-to-new.sh            # ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ
â”‚   â”œâ”€â”€ post-migration-verify.sh     # Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
â”‚   â”œâ”€â”€ emergency-rollback.sh        # Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚ÐºÐ°Ñ‚
â”‚   â”œâ”€â”€ backup.sh                    # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð±ÑÐºÐ°Ð¿Ð¾Ð²
â”‚   â”œâ”€â”€ restore.sh                   # Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
â”‚   â”œâ”€â”€ sync-remote.sh               # Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ
â”‚   â””â”€â”€ telegram-notify.sh           # Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
â”œâ”€â”€ MIGRATION_README.md              # Ð­Ñ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚
â”œâ”€â”€ MIGRATION_CHECKLIST.md           # Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚
â”œâ”€â”€ ROLLBACK_PLAN.md                 # ÐŸÐ»Ð°Ð½ Ð¾Ñ‚ÐºÐ°Ñ‚Ð°
â”œâ”€â”€ DNS_UPDATE_INSTRUCTIONS.md       # DNS Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ config.yaml
â”œâ”€â”€ .env
â”œâ”€â”€ prometheus.yml
â””â”€â”€ backups/
    â””â”€â”€ latest/                      # ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð±ÑÐºÐ°Ð¿
```

---

## Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸:

1. **ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°** - Ñ‚Ñ‰Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð½Ð°Ñ‡Ð°Ð»Ð¾Ð¼
2. **Ð‘ÑÐºÐ°Ð¿Ñ‹** - Ð²ÑÐµÐ³Ð´Ð° Ð¸Ð¼ÐµÐ¹Ñ‚Ðµ ÑÐ²ÐµÐ¶Ð¸Ð¹ Ð±ÑÐºÐ°Ð¿
3. **Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÑÐµ Ð½Ð° Ð½Ð¾Ð²Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð”Ðž Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ DNS
4. **ÐŸÐ»Ð°Ð½ Ð¾Ñ‚ÐºÐ°Ñ‚Ð°** - Ð²ÑÐµÐ³Ð´Ð° Ð¸Ð¼ÐµÐ¹Ñ‚Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ
5. **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³** - ÑÐ»ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹ Ð¿Ð¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
6. **Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ** - Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð²ÑÐµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ

### Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚:

```bash
# 1. ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
./scripts/pre-migration-check.sh

# 2. ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ
./scripts/migrate-to-new.sh

# 3. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ DNS (Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ)
# Ð¡Ð¼. DNS_UPDATE_INSTRUCTIONS.md

# 4. Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
ssh yan@65.21.202.252 "cd /home/yan/litellm && ./scripts/post-migration-verify.sh"

# 5. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸
ssh yan@65.21.202.252 "cd /home/yan/litellm && ./scripts/setup-cron.sh"

# 6. ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ 48 Ñ‡Ð°ÑÐ¾Ð²
# 7. Ð¤Ð¸Ð½Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
```

---

**Ð£Ð´Ð°Ñ‡Ð½Ð¾Ð¹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸! ðŸš€**

*ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹Ñ‚ÐµÑÑŒ Ðº ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¼ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼ Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°.*

---

**ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ:** $(date '+%Y-%m-%d %H:%M:%S')
**Ð’ÐµÑ€ÑÐ¸Ñ:** 1.0
